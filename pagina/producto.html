<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Bienvenidos a Nuestra Tienda de Insumos Computacionales</title>
    <link rel="stylesheet" href="css/styleProductos.css">
</head>

<body>
    <header>
        <div class="logo-container">
            <img src="img/logoTech.png" class="foto">
            <div class="title-container">
                <div class="logo">Tienda de Insumos Computacionales Chile</div>
                <a href="login.html" class="login-btn">Hola!, Inicia Sesion</a>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="producto.html">Productos</a></li>
            </ul>
        </nav>
    </header>
    <div class="titlePage">
        <p id="product-count" class="product-count"></p>
        <h2>Productos</h2>
    </div>
    
    <div class="container-Cat">
        <h4>Categorias</h4>
        <select id="Productos" onchange="cargarProductos()">
            <option value="">Selecciona una Categoria</option>
            <option value="notebooks">Notebooks</option>
            <option value="auriculares">Auriculares</option>
            <option value="mouse">Mouse</option>
            <option value="monitores">Monitores</option>
            <option value="mousepads">MousePads</option>
        </select>
    </div>
    
    <div id="promos-list" class="product-list"></div>

    <script src="products.js"></script>


    <div class="card-container" id="productos-list"></div>

    <script>
        let cartCount = 0;
        window.onload = function () {
            fetch('/catalogo')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                var productsList = document.getElementById('productos-list');
                data.forEach(function(prod) {
                    var card = document.createElement('div');
                    card.classList.add('card');
                    card.style.width = '18rem';
                    card.innerHTML = '<img src="img/imgHamburger.png" class="card-img-top" alt="' + producto.nombreProducto + '">' +
                                     '<div class="card-body">' +
                                     '<h5 class="card-title">' + producto.nombreProducto + '</h5>' +
                                     '<p><strong>Stock:</strong> ' + producto.stock + '</p>' +
                                     '<p><strong>Precio:</strong> $' + producto.precioUnitario + '</p>' +
                                     '<button class="btn btn-success" onclick="agregarAlCarrito()">Agregar al Carrito</button>' +
                                     '<button class="btn btn-danger" onclick="quitarDelCarrito()">Quitar del Carrito</button>' +
                                     '</div>';
                    productsList.appendChild(card);
                });
            });
        };
         function agregarAlCarrito() {
            cartCount++;
            document.getElementById('cart-count').innerText = cartCount;
        }

        function quitarDelCarrito() {
            cartCount--;
            document.getElementById('cart-count').innerText = cartCount;
        }
    </script>

<script>
    function eliminarProducto(id) {
        fetch('/eliminar_producto/' + id, {
            method: 'DELETE'
        })
        .then(function(response) {
            if (response.ok) {
                console.log('Producto eliminado correctamente.');
                window.location.reload();
            } else {
                console.error('Error al eliminar producto.');
            }
        })
        .catch(function(error) {
            console.error('Error en la solicitud:', error);
        });
    }

</script>

<script>
    function modificarProducto(id) {
        window.location.href = '/modificarProducto.html?id=' + id;
    }
</script>
    
    <footer id="contacto">
        <p>&copy; 2024 Tienda de Insumos Computacionales. Todos los derechos reservados.</p>
        <div class="registrarse-link">
            <h5>Consulte aca: <a href="contacto.html">Contacto</a></h5>
            <h6>Recuerde, nos pagan por ayudarle ;|</h6>
        </div>
    </footer>
</body>

</html>
